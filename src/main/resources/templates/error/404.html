<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security" lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>404 - Страницата не е намерена | Warehouse Portal</title>

    <!-- Bootstrap Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.1/font/bootstrap-icons.min.css" rel="stylesheet">

    <!-- Error Styles -->
    <link rel="stylesheet" href="/css/error.css">
</head>
<body class="error-page">
<section>
    <div class="error-container">
        <div class="error-visual">
            <div class="error-number">404</div>
            <div class="error-icon">
                <i class="bi bi-search"></i>
            </div>
        </div>

        <div class="error-content">
            <h1 class="error-title">Страницата не е намерена</h1>
            <p class="error-message">
                Съжаляваме, но страницата която търсите не съществува или е била преместена.
                Моля, проверете адреса или използвайте навигацията за да намерите това което търсите.
            </p>

            <div th:if="${originalUrl}" class="error-details">
                <h3>
                    <i class="bi bi-info-circle"></i>
                    Информация за заявката
                </h3>
                <p>
                    Заявеният URL: <code th:text="${originalUrl}">url</code>
                </p>
            </div>

            <div class="error-suggestions">
                <h3>
                    <i class="bi bi-lightbulb"></i>
                    Възможни причини
                </h3>
                <ul>
                    <li>Грешка в адреса (URL) - проверете дали е написан правилно</li>
                    <li>Страницата е била преместена или изтрита от системата</li>
                    <li>Нямате права за достъп до този ресурс</li>
                    <li>Временен проблем със сървъра или мрежата</li>
                </ul>
            </div>

            <div class="error-actions">
                <a th:href="@{/}" class="btn">
                    <i class="bi bi-house nav-icon"></i>
                    Начална страница
                </a>
                <button onclick="history.back()" class="btn btn-secondary">
                    <i class="bi bi-arrow-left nav-icon"></i>
                    Назад
                </button>
                <a th:href="@{/catalog}" class="btn btn-secondary">
                    <i class="bi bi-grid-3x2 nav-icon"></i>
                    Каталог
                </a>
            </div>

            <div class="helpful-links">
                <h4>
                    <i class="bi bi-compass"></i>
                    Полезни връзки
                </h4>
                <div class="links-grid">
                    <a th:href="@{/catalog}" class="help-link">
                        <i class="bi bi-box-seam link-icon"></i>
                        <span class="link-text">Каталог продукти</span>
                    </a>
                    <a th:href="@{/orders}" class="help-link" sec:authorize="hasRole('CLIENT')">
                        <i class="bi bi-list-check link-icon"></i>
                        <span class="link-text">Моите заявки</span>
                    </a>
                    <a th:href="@{/templates/employer}" class="help-link" sec:authorize="hasRole('ADMIN')">
                        <i class="bi bi-gear link-icon"></i>
                        <span class="link-text">Админ панел</span>
                    </a>
                    <a th:href="@{/about}" class="help-link">
                        <i class="bi bi-info-square link-icon"></i>
                        <span class="link-text">За системата</span>
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Track 404 errors for analytics
        console.log('404 Error tracked:', {
            url: window.location.pathname,
            timestamp: new Date().toISOString(),
            userAgent: navigator.userAgent
        });

        // Add click tracking for recovery actions
        const actionButtons = document.querySelectorAll('.error-actions .btn, .help-link');
        actionButtons.forEach(button => {
            button.addEventListener('click', function() {
                console.log('404 recovery action clicked:', this.textContent.trim());
            });
        });

        // Add keyboard shortcuts for common actions
        document.addEventListener('keydown', function(e) {
            if (e.key === 'h' && e.ctrlKey) {
                e.preventDefault();
                window.location.href = '/';
            } else if (e.key === 'b' && e.ctrlKey) {
                e.preventDefault();
                history.back();
            } else if (e.key === 'r' && e.ctrlKey) {
                e.preventDefault();
                location.reload();
            }
        });
    });
</script>
</body>
</html>